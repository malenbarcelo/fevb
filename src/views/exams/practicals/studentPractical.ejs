<%- include('../../partials/head') %>
<%- include('../../partials/header') %>

<form action="/examenes/examen-practico/<%= data.id %>" method="POST">

    <div class="fs-19 fw-b mt-25_0 ta-c">EXAMEN PRÁCTICO <%= data.exam_practical_data.exam_name.toUpperCase() %></div>
    <div class="fs-14 mt-10 ta-c fc-1"><%= data.student_data.name.toUpperCase() %></div>
    <div class="fs-14 mt-10 ta-c fc-1"><%= 'CUIT: ' + data.student_data.cuit %></div>

    <!--- error --->
    <div class="fs-15 fw-b fc-error mt-15 mb-15 flex-r cg-3 jc-c ai-c not-visible" id="examError">
        <i class="fa-solid fa-triangle-exclamation"></i>
        Debe completar todos los campos
    </div>

    <!--- sworn declaration --->    
    <div class="stage-container" id="stageSwornDeclaration">
        
        <div class="practical-question-text">
            Declaro bajo juramento que los datos consignados en este formulario son correctos y completos, siendo fiel expresión de la verdad y que las respuestas al cuestionario han sido realizadas por mí sin intervención de terceros.
        </div>

        <div class="mt-15 practical-question-text">
            Declaro que el alumno ha sido debidamente informado sobre la filmación y grabado de la conversación e indicaciones entre conductor e instructor durante la práctica de conducción
        </div>

        <div class="flex-r cg-3 ai-c mt-15 pointer">
            <input type="checkbox" class="pointer" id="swornDeclaration" name="swornDeclaration">
            <label for="swornDeclaration" class="pointer">Acepto</label>
        </div>

    </div>

    <!--- teachers --->    
    <div class="stage-container" id="stageTeachers">
        
        <div class="practical-question-text fw-b mb-15">Nombre del instructor</div>

        <% teachers.forEach(teacher => { %>
            <div class="flex-r cg-3 ai-c mt-7 pointer">
                <input type="radio" class="pointer" value="<%= 'teacher_' + teacher.id %>" id="<%= 'teacher_' + teacher.id %>" name="teacher">
                <label for="<%= 'teacher_' + teacher.id %>" class="pointer"><%= teacher.name %></label>
            </div>
        <% }) %>

    </div>

    <!--- stages questions --->
    <% stagesQuestions.forEach(stage => { %>

        <div class="stage-container" id="<%= 'stage_' + stage.stage_number %>">

            <div class="practical-question-text mb-20 fw-b"><%= stage.stage_name.toUpperCase() %></div>

            <% stage.questions.forEach(question => { %>

                <div class="practical-question-box <%= question.question_number % 2 == 0 ? 'practical-question-option-even' : 'practical-question-option-odd' %>">

                    <div class="practical-question"><%= question.question_number + '. ' + question.question %></div>

                    <div class="practical-question-options">

                        <% question.question_options.forEach(option => { %>

                            <div class="flex-r cg-3 ai-c pointer">

                                <input type="radio" class="pointer" value="<%= 'question_' + question.id + '_option_' + option.id %>" name="<%= 'question_' + question.id %>" id="<%= 'question_' + question.id + '_option_' + option.id %>">

                                <label for="<%= 'question_' + question.id + '_option_' + option.id %>" class="pointer"><%= option.option_text %></label>

                            </div>

                        <% }) %>
                    </div>
                    
                </div>
            <% }) %>

            <div class="mt-25 mb-5 fw-b">Observaciones <%= stage.stage_name.toUpperCase() %></div>
            <input type=text class="practical-input-obs" name="<%= 'obs_stage_' + stage.stage_number %>">

        </div>
    
    <% }) %>

    <!--- results --->
    <div class="stage-container" id="stageResults">
        <div class="practical-question-text fw-b mb-15">Resultado de la práctica</div>
        <div id="ceppResults">
            <% stagesQuestions.forEach((stage, index) => { %>
                <div class="practical-question-box <%= index % 2 == 0 ? 'practical-question-option-odd' : 'practical-question-option-even' %>">
                    
                    <div class="practical-question"><%= stage.stage_name.toUpperCase()%></div>
                    
                    <div class="practical-question-options">                    
                        <!--- passed --->
                        <div class="flex-r cg-3 ai-c pointer">
                            <input type="radio" class="pointer" value="<%= 'results_passed_' + stage.stage_number %>" id="<%= 'results_passed_' + stage.stage_number %>" name="<%= 'results_' + stage.stage_number %>">
                            <label for="<%= 'results_passed_' + stage.stage_number %>" class="pointer">Aprueba</label>
                        </div>

                        <!--- not passed --->
                        <div class="flex-r cg-3 ai-c pointer">
                            <input type="radio" class="pointer" value="<%= 'results_notPassed_' + stage.stage_number %>"  id="<%= 'results_notPassed_' + stage.stage_number %>" name="<%= 'results_' + stage.stage_number %>">
                            <label for="<%= 'results_notPassed_' + stage.stage_number %>" class="pointer">Desaprueba</label>
                        </div>
                    </div>

                </div>
            <% }) %>
        </div>

        <div class="mt-25 mb-5 fw-b">Observaciones finales</div>
        <div class="fs-13 mb-5">Indique aquí cualquier comentario que considere pertinente. En caso de que el alumno desapruebe la práctica debe aclarar aquí los motivos.</div>
        <input type=text class="practical-input-obs" name="obs_results">
    </div>

    <!--- button --->
    <div class="buttons-row mt-30 mb-40">
        <button type="submit" class="btn-std w-300 pad-9-0" id="sendAnswers">ENVIAR RESULTADOS</button>
    </div>
    

    <!-- loader -->
    <div class="loader ld-std" id="loader">
        <div class="ld-content lt-m"></div>
    </div>

    <!----------SCRIPTS---------->
    <script type="module" src="/js/exams/practicals/studentExam/studentExam.js?v=<%= Date.now() %>"></script>

</form>

